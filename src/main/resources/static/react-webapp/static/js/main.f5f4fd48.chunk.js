(this["webpackJsonpdesafio-frontend"]=this["webpackJsonpdesafio-frontend"]||[]).push([[0],{137:function(e,t,a){},140:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(25),c=a.n(s),r=a(24),i=a(14),o=a(70),l=a(4),u="SET_TITLE_HEADER_APP",d="INITIAL_USER_STATE",j="FINALLY_USER_REGISTER",b="POST_USER_REQUEST",h="POST_USER_SUCCESS",O="POST_USER_ERROR",m="POST_USER_CONFLICT",p="PUT_USER_REQUEST",f="PUT_USER_SUCCESS",x="PUT_USER_ERROR",v="PUT_USER_CONFLICT",S="DELETE_USER_REQUEST",E="DELETE_USER_SUCCESS",g="DELETE_USER_ERROR",C="GET_USER_REQUEST",y="GET_USER_SUCCESS",N="GET_USER_ERROR",R="GET_USER_NOT_FOUND",T="GET_USER_HAS_EVENTS",_="INITIAL_EVENT_STATE",w="FINALLY_EVENT_REGISTER",U="POST_EVENT_REQUEST",k="POST_EVENT_SUCCESS",A="POST_EVENT_ERROR",L="PUT_EVENT_REQUEST",I="PUT_EVENT_SUCCESS",z="PUT_EVENT_ERROR",D="DELETE_EVENT_REQUEST",G="DELETE_EVENT_SUCCESS",V="DELETE_EVENT_ERROR",P="GET_EVENT_REQUEST",F="GET_EVENT_SUCCESS",B="GET_EVENT_ERROR",q="GET_EVENT_NOT_FOUND",H="AUTH_REQUEST",Q="AUTH_LOGIN_SUCCESS",W="AUTH_LOGOUT_SUCCESS",Y="AUTH_ERROR",J={headerTitle:"Home"};function K(e){return{headerTitle:e.headerTitle}}var M={data:[],status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}};function X(e){return{status:2,modal:{status:2,title:"Salvo",message:"Usu\xe1rio foi salvo com sucesso!",showSpinner:!1,handleClose:e&&e.handleClose}}}function Z(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e&&e.handleClose}}}function $(e){return{status:3,modal:{status:3,title:"Aten\xe7\xe3o",message:"N\xe3o foi poss\xedvel conluir a opera\xe7\xe3o pois o usu\xe1rio j\xe1 exsite cadastrado.",showSpinner:!1,handleClose:e&&e.handleClose}}}function ee(e){return{status:2,modal:{status:2,title:"Atualizado",message:"Usu\xe1rio foi atualizado com sucesso!",showSpinner:!1,handleClose:e&&e.handleClose}}}function te(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e&&e.handleClose}}}function ae(e){return{status:3,modal:{status:3,title:"Aten\xe7\xe3o",message:"N\xe3o foi poss\xedvel conluir a opera\xe7\xe3o pois o e-mail a ser atualizado j\xe1 exsite cadastrado para outro usu\xe1rio.",showSpinner:!1,handleClose:e&&e.handleClose}}}function ne(e){return{status:0,data:e.data}}function se(e){return{status:4,modal:{status:4,title:"Aten\xe7\xe3o",message:"Este usu\xe1rio possui eventos associados, e n\xe3o poder\xe1 ser exclu\xeddo. Remova todos os eventos associados para poder exlcu\xedr o usu\xe1rio.",showSpinner:!1,handleClose:e&&e.handleClose}}}var ce={data:[],status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}};function re(e){return{status:2,modal:{status:2,title:"Salvo",message:"Evento criado com sucesso!",showSpinner:!1,handleClose:e.handleClose}}}function ie(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e.handleClose}}}function oe(e){return{status:2,modal:{status:2,title:"Atualizado",message:"Evento foi atualizado com sucesso!",showSpinner:!1,handleClose:e.handleClose}}}function le(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e.handleClose}}}function ue(e){return{status:0,data:e.data}}var de={status:0,token:"",isAuthenticated:!1,user:{id:null,name:"",email:"",admin:!1}};function je(e){return{status:2,isAuthenticated:!0,token:e.token,user:e.user}}function be(){return de}function he(e){return{status:3,token:"",isAuthenticated:!1,user:null,httpStatus:e&&e.httpStatus}}var Oe=Object(o.a)({appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),K(t.payload));default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case Q:return Object(l.a)(Object(l.a)({},e),je(t.payload));case W:return Object(l.a)(Object(l.a)({},e),be(t.payload));case Y:return Object(l.a)(Object(l.a)({},e),he(t.payload));default:return e}},userRegisterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)({},M);case j:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}}));case b:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Salvando",message:"Aguarde...",showSpinner:!0}}));case h:return Object(l.a)(Object(l.a)({},e),X(t.payload));case O:return Object(l.a)(Object(l.a)({},e),Z(t.payload));case m:return Object(l.a)(Object(l.a)({},e),$(t.payload));case x:return Object(l.a)(Object(l.a)({},e),te(t.payload));case p:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Atualizando",message:"Aguarde...",showSpinner:!0}}));case f:return Object(l.a)(Object(l.a)({},e),ee(t.payload));case v:return Object(l.a)(Object(l.a)({},e),ae(t.payload));case g:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case S:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case E:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0}));case C:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case y:return Object(l.a)(Object(l.a)({},e),ne(t.payload));case N:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case R:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:4}));case T:return Object(l.a)(Object(l.a)({},e),se(t.payload));default:return e}},eventRegisterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(l.a)({},ce);case w:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}}));case U:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Salvando",message:"Aguarde...",showSpinner:!0}}));case k:return Object(l.a)(Object(l.a)({},e),re(t.payload));case A:return Object(l.a)(Object(l.a)({},e),ie(t.payload));case z:return Object(l.a)(Object(l.a)({},e),le(t.payload));case L:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Atualizando",message:"Aguarde...",showSpinner:!0}}));case I:return Object(l.a)(Object(l.a)({},e),oe(t.payload));case V:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case D:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case G:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0}));case P:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case F:return Object(l.a)(Object(l.a)({},e),ue(t.payload));case B:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case q:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:4}));default:return e}}}),me=Object(o.b)(Oe),pe=(a(136),a(137),a(264)),fe=a(269),xe=a(126),ve=a(273),Se=a(272),Ee=a(69),ge=a(1);var Ce=function(e){var t=(e.options||{}).title;return Object(ge.jsx)("div",{className:"header-app",children:Object(ge.jsx)(ve.a,{bg:"light",expand:"lg",children:Object(ge.jsxs)(pe.a,{children:[Object(ge.jsx)(ve.a.Brand,{href:"#home",children:Object(ge.jsx)("div",{className:"d-flex align-items-center",children:t})}),Object(ge.jsx)(ve.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(ge.jsx)(ve.a.Collapse,{id:"basic-navbar-nav",children:Object(ge.jsxs)(Se.a,{className:"mr-auto d-sm-block d-lg-none",children:[Object(ge.jsx)(Se.a.Link,{href:"/app/eventos",children:"Eventos"}),Object(ge.jsx)(Se.a.Link,{href:"/app/usuarios",children:"Usu\xe1rios"}),Object(ge.jsx)(Se.a.Link,{href:"/app/logout",children:"Sair"})]})}),Object(ge.jsx)(Se.a.Link,{href:"/app/logout",className:"d-none d-lg-block",children:Object(ge.jsxs)("div",{className:"d-flex align-items-center",children:[Object(ge.jsx)("span",{className:"mr-2",children:"Sair"}),Object(ge.jsx)(Ee.a,{})]})})]})})})},ye=a(274);a(140);var Ne=function(){return Object(ge.jsx)("div",{className:"sidebar-app",children:Object(ge.jsx)(ye.a,{className:"card-panel",children:Object(ge.jsx)(ye.a.Body,{children:Object(ge.jsxs)(Se.a,{defaultActiveKey:"/",className:"flex-column",children:[Object(ge.jsx)(r.b,{to:"/app/eventos",className:"nav-link",children:Object(ge.jsxs)("div",{className:"d-flex align-items-center",children:[Object(ge.jsx)(Ee.d,{className:"mr-2"}),Object(ge.jsx)("span",{children:"Eventos"})]})}),Object(ge.jsx)(r.b,{to:"/app/usuarios",className:"nav-link",children:Object(ge.jsxs)("div",{className:"d-flex align-items-center",children:[Object(ge.jsx)(Ee.b,{className:"mr-2"}),Object(ge.jsx)("span",{children:"Usu\xe1rios"})]})})]})})})})},Re=a(10),Te=a(8),_e=a(43),we=a(16),Ue=a(271),ke=a(266),Ae=a(270),Le=a(265);var Ie=function(e){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ae.a,{show:e.status>0,backdrop:"static",keyboard:!1,children:[e.title&&Object(ge.jsx)(Ae.a.Header,{children:Object(ge.jsx)(Ae.a.Title,{children:e.title})}),Object(ge.jsxs)(Ae.a.Body,{children:[e.showSpinner&&Object(ge.jsx)(Le.a,{animation:"border",size:"sm",className:"mr-2"}),e.message,Object(ge.jsx)("div",{className:"d-flex justify-content-end mt-3",children:e.handleClose&&Object(ge.jsx)(ke.a,{variant:"primary",size:"sm",className:"px-4",onClick:e.handleClose,children:"OK"})})]})]})})};var ze=function(e){var t=e.options||{},a=t.handleSubmit,n=t.handleCancel,s=t.modal,c=t.editData,r=we.b().shape({name:we.c().required("obrigat\xf3rio"),email:we.c().email("e-mail inv\xe1lido").required("obrigat\xf3rio"),password:we.c().min(8,"senha deve ter no m\xednimo 8 caract\xe9res").required("obrigat\xf3rio")});return Object(ge.jsx)(_e.a,{validationSchema:r,onSubmit:a,initialValues:Object(l.a)(Object(l.a)({},{name:"",email:"",password:""}),c||{}),children:function(e){var t=e.handleSubmit,a=e.handleChange,c=(e.handleBlur,e.values),r=e.touched,i=(e.isValid,e.errors);e.isSubmitting;return Object(ge.jsxs)(Ue.a,{noValidate:!0,onSubmit:t,children:[Object(ge.jsxs)(Ue.a.Row,{children:[Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"12",controlId:"groupName",children:[Object(ge.jsx)(Ue.a.Label,{children:"Nome"}),Object(ge.jsx)(Ue.a.Control,{type:"text",placeholder:"",name:"name",value:c.name,onChange:a,isInvalid:r.name&&!!i.name,disabled:1===s.status,autoComplete:"off"}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:i.name})]}),Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"12",controlId:"groupEmail",children:[Object(ge.jsx)(Ue.a.Label,{children:"E-mail"}),Object(ge.jsx)(Ue.a.Control,{type:"email",placeholder:"",name:"email",value:c.email,onChange:a,isInvalid:r.email&&!!i.email,autoComplete:"off",disabled:1===s.status}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:i.email})]}),Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"12",controlId:"groupPassword",children:[Object(ge.jsx)(Ue.a.Label,{children:"Senha"}),Object(ge.jsx)(Ue.a.Control,{type:"password",placeholder:"",name:"password",value:c.password,onChange:a,isInvalid:r.password&&!!i.password,autoComplete:"new-password",disabled:1===s.status}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:i.password})]}),1!==s.status&&2!==s.status&&Object(ge.jsxs)(Ue.a.Group,{as:xe.a,controlId:"groupControls",children:[Object(ge.jsx)(ke.a,{variant:"primary",type:"submit",size:"sm",className:"px-4 mr-3",disabled:1===s.status,children:"Salvar"}),Object(ge.jsx)(ke.a,{variant:"secondary",type:"button",size:"sm",onClick:n,className:"px-3",children:"Cancelar"})]})]}),Object(ge.jsx)(Ie,{status:s.status,title:s.title,message:s.message,showSpinner:s.showSpinner,handleClose:s.handleClose})]})}})},De=a(267);var Ge=function(e){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsxs)(Ae.a,{show:e.status>0,backdrop:"static",keyboard:!1,children:[e.title&&Object(ge.jsx)(Ae.a.Header,{children:Object(ge.jsx)(Ae.a.Title,{children:e.title})}),Object(ge.jsxs)(Ae.a.Body,{children:[e.showSpinner&&Object(ge.jsx)(Le.a,{animation:"border",size:"sm",className:"mr-2"}),e.message,Object(ge.jsx)("div",{className:"d-flex justify-content-end mt-3",children:e.children})]})]})})};var Ve=function(e){var t=e.data||[],a=e.authState,s=e.actions||{},c=s.handleEdit,r=s.handleDelete,i=Object(n.useState)(0),o=Object(Te.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(),j=Object(Te.a)(d,2),b=j[0],h=j[1],O=Object(n.useState)(),m=Object(Te.a)(O,2),p=m[0],f=m[1];return Object(ge.jsxs)("div",{className:"data-table-list",children:[Object(ge.jsxs)(De.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(ge.jsx)("thead",{children:Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("th",{children:"#"}),Object(ge.jsx)("th",{children:"Nome"}),Object(ge.jsx)("th",{children:"E-mail"}),Object(ge.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(ge.jsx)("tbody",{children:t.map((function(e,t){return Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("td",{children:t+1}),Object(ge.jsx)("td",{children:e.name}),Object(ge.jsx)("td",{children:e.email}),Object(ge.jsx)("td",{children:(a.user.admin||a.user.email===e.email)&&Object(ge.jsxs)("div",{children:[Object(ge.jsx)(ke.a,{onClick:function(){return c(e)},size:"sm",className:"mr-2",variant:"transparent",title:"editar",children:Object(ge.jsx)(Ee.c,{color:"#007bff",strokeWidth:.5})}),a.user.admin&&!e.roles.includes("SYSTEM")&&Object(ge.jsx)(ke.a,{onClick:function(){return t=function(){return r(e)},u(1),h((function(){return function(){u(0),t&&t()}})),void f((function(){return function(){u(0),a&&a()}}));var t,a},size:"sm",variant:"transparent",title:"remover",children:Object(ge.jsx)(Ee.e,{color:"#dc3545",strokeWidth:.5})})]})})]},t)}))})]}),Object(ge.jsx)(Ge,{status:l,title:"Excluir?",message:"Deseja realmente exlcuir?",children:Object(ge.jsxs)("div",{className:"d-flex justify-content-end mt-3",children:[Object(ge.jsx)(ke.a,{variant:"primary",size:"sm",className:"px-4 mr-2",onClick:b,children:"Sim"}),Object(ge.jsx)(ke.a,{variant:"secondary",size:"sm",className:"px-4",onClick:p,children:"N\xe3o"})]})})]})},Pe=function(e,t){return{type:e,payload:t}},Fe=function(e){return Pe(d,e)},Be=function(e){return Pe(j,e)},qe=function(e){return Pe(C,e)},He=function(e){return Pe(y,e)},Qe=function(e){return Pe(N,e)},We=function(e){return Pe(R,e)},Ye=function(e){return function(e,t){return{type:e,payload:t}}(u,{headerTitle:e})},Je=a(127),Ke=a.n(Je).a.create({baseURL:"https://desafio-nkey-gestor-eventos.herokuapp.com/api"}),Me=function(e){return{headers:{Authorization:"Bearer ".concat(e)}}},Xe={createUser:function(e,t){return Ke.post("/users",e,Me(t))},updateUser:function(e,t){return Ke.put("/users",e,Me(t))},deleteUser:function(e,t){return Ke.delete("/users/".concat(e),Me(t))},getUser:function(e,t){return Ke.get("/users/".concat(e),Me(t))},getAllUsers:function(e){return Ke.get("/users/",Me(e))}},Ze=function(e,t){return{type:e,payload:t}},$e=function(e){return Ze(H,e)},et=function(e){return Ze(Q,e)},tt=function(e){return Ze(W,e)},at=function(e){return Ze(Y,e)};var nt=Object(i.b)((function(e){return{userRegisterState:e.userRegisterReducer,appState:e.appReducer,authState:e.authReducer}}))((function(e){var t=Object(n.useState)(!1),a=Object(Te.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),o=Object(Te.a)(r,2),l=o[0],u=o[1],d=Object(n.useState)({}),j=Object(Te.a)(d,2),C=j[0],y=j[1],N=Object(i.c)(),R=e.userRegisterState,_=e.appState,w=e.authState;function U(){N(qe()),Xe.getAllUsers(w.token).then((function(e){N(He({data:e.data.content}))})).catch((function(e){if(e&&404===e.response.status)return N(We());k(e),N(Qe({handleClose:function(){}}))}))}function k(e){e&&e.response&&403===e.response.status&&N(tt())}return Object(n.useEffect)((function(){N(Ye("Usu\xe1rios")),U()}),[]),Object(ge.jsxs)("div",{className:"user-register",children:[Object(ge.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(ge.jsx)("h4",{className:"mr-2",children:_.headerTitle}),s&&Object(ge.jsx)("h6",{children:" /\xa0  Cadastrar"}),l&&Object(ge.jsx)("h6",{children:" /\xa0  Editar"}),!l&&!s&&Object(ge.jsx)("h6",{children:" /\xa0 Lista"})]}),!s&&!l&&w.user.admin&&Object(ge.jsx)("div",{className:"user-register-top-panel my-4",children:Object(ge.jsx)(ke.a,{variant:"success",onClick:function(){c(!0)},size:"sm",className:"px-3",children:"Novo"})}),s&&Object(ge.jsx)(ze,{options:{handleSubmit:function(e){var t;N(Fe()),N(Pe(b,t)),Xe.createUser(e,w.token).then((function(){N(function(e){return Pe(h,e)}({handleClose:function(){c(!1),N(Be()),U()}}))})).catch((function(e){e&&e.response&&409===e.response.status?N(function(e){return Pe(m,e)}({handleClose:function(){N(Be())}})):N(function(e){return Pe(O,e)}({handleClose:function(){N(Be())}})),k(e)}))},handleCancel:function(){c(!1),U()},modal:R.modal}}),l&&Object(ge.jsx)(ze,{options:{handleSubmit:function(e){var t;N(Fe()),N(Pe(p,t)),Xe.updateUser(e,w.token).then((function(){N(function(e){return Pe(f,e)}({handleClose:function(){u(!1),N(Be()),U()}}))})).catch((function(e){e&&e.response&&409===e.response.status?N(function(e){return Pe(v,e)}({handleClose:function(){N(Be()),U()}})):N(function(e){return Pe(x,e)}({handleClose:function(){N(Be())}})),k(e)}))},handleCancel:function(){u(!1),U()},modal:R.modal,editData:C}}),!s&&!l&&Object(ge.jsx)(Ve,{data:R.data,actions:{handleEdit:function(e){y(e),u(!0)},handleDelete:function(e){var t;N(Fe()),N(Pe(S,t)),Xe.deleteUser(e.id,w.token).then((function(){N(function(e){return Pe(E,e)}()),U()})).catch((function(e){e&&e.response&&422===e.response.status&&"cannot delete because has events"===e.response.data.message?N(function(e){return Pe(T,e)}({handleClose:function(){N(Be()),U()}})):N(function(e){return Pe(g,e)}({handleClose:function(){}})),k(e)}))}},authState:w}),4===R.status&&Object(ge.jsx)(Ie,{status:R.modal.status,title:R.modal.title,message:R.modal.message,showSpinner:R.modal.showSpinner,handleClose:R.modal.handleClose})]})})),st=a(20);var ct=function(e){var t=e.options||{},a=t.handleSubmit,n=t.handleCancel,s=t.modal,c=t.editData,r=t.users,i=[{id:null,name:""}].concat(Object(st.a)(r||[])),o=we.b().shape({name:we.c().required("obrigat\xf3rio"),date:we.a().required("obrigat\xf3rio"),user:we.c().nullable().required("obrigat\xf3rio")});return Object(ge.jsx)(_e.a,{validationSchema:o,onSubmit:a,initialValues:Object(l.a)(Object(l.a)({},{name:"",date:"",user:null}),c||{}),children:function(e){var t,a=e.handleSubmit,c=e.handleChange,r=(e.handleBlur,e.values),o=e.touched,l=(e.isValid,e.errors);e.isSubmitting;return Object(ge.jsxs)(Ue.a,{noValidate:!0,onSubmit:a,children:[Object(ge.jsxs)(Ue.a.Row,{className:"d-flex justify-content-between",children:[Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"12",controlId:"groupName",children:[Object(ge.jsx)(Ue.a.Label,{children:"Nome do Evento"}),Object(ge.jsx)(Ue.a.Control,{type:"text",placeholder:"",name:"name",value:r.name,onChange:c,isInvalid:o.name&&!!l.name,disabled:1===s.status,autoComplete:"off"}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:l.name})]}),Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"5",controlId:"groupDate",children:[Object(ge.jsx)(Ue.a.Label,{children:"Data"}),Object(ge.jsx)(Ue.a.Control,{type:"date",placeholder:"",name:"date",value:(t=r.date,t?new Date(t).toLocaleDateString().split("/").reverse().join("-"):t),onChange:c,isInvalid:o.date&&!!l.date,autoComplete:"off",disabled:1===s.status}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:l.date})]}),Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"5",controlId:"groupUser",children:[Object(ge.jsx)(Ue.a.Label,{children:"Respons\xe1vel"}),Object(ge.jsx)(Ue.a.Control,{as:"select",custom:!0,name:"user",value:r.user,onChange:c,isInvalid:o.user&&!!l.user,disabled:1===s.status,children:i.map((function(e,t){return Object(ge.jsx)("option",{value:e.id,label:e.name},t)}))}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:l.user})]}),1!==s.status&&2!==s.status&&Object(ge.jsxs)(Ue.a.Group,{as:xe.a,xs:12,controlId:"groupControls",children:[Object(ge.jsx)(ke.a,{variant:"primary",type:"submit",size:"sm",className:"px-4 mr-3",disabled:1===s.status,children:"Salvar"}),Object(ge.jsx)(ke.a,{variant:"secondary",type:"button",size:"sm",onClick:n,className:"px-3",children:"Cancelar"})]})]}),Object(ge.jsx)(Ie,{status:s.status,title:s.title,message:s.message,showSpinner:s.showSpinner,handleClose:s.handleClose})]})}})};var rt=function(e){var t=e.data||[],a=e.actions||{},s=a.handleEdit,c=a.handleDelete,r=Object(n.useState)(0),i=Object(Te.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)(),d=Object(Te.a)(u,2),j=d[0],b=d[1],h=Object(n.useState)(),O=Object(Te.a)(h,2),m=O[0],p=O[1];return Object(ge.jsxs)("div",{className:"data-table-list",children:[Object(ge.jsxs)(De.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(ge.jsx)("thead",{children:Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("th",{children:"#"}),Object(ge.jsx)("th",{children:"Data"}),Object(ge.jsx)("th",{children:"Nome"}),Object(ge.jsx)("th",{children:"Respons\xe1vel"}),Object(ge.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(ge.jsx)("tbody",{children:t.map((function(e,t){return Object(ge.jsxs)("tr",{children:[Object(ge.jsx)("td",{children:t+1}),Object(ge.jsx)("td",{children:(a=e.date,a?new Date(a).toLocaleDateString():a)}),Object(ge.jsx)("td",{children:e.name}),Object(ge.jsx)("td",{children:e.user?e.user.name:null}),Object(ge.jsxs)("td",{children:[Object(ge.jsx)(ke.a,{onClick:function(){return s(e)},size:"sm",className:"mr-2",variant:"transparent",title:"editar",children:Object(ge.jsx)(Ee.c,{color:"#007bff",strokeWidth:.5})}),Object(ge.jsx)(ke.a,{onClick:function(){return t=function(){return c(e)},l(1),b((function(){return function(){l(0),t&&t()}})),void p((function(){return function(){l(0),a&&a()}}));var t,a},size:"sm",variant:"transparent",title:"remover",children:Object(ge.jsx)(Ee.e,{color:"#dc3545",strokeWidth:.5})})]})]},t);var a}))})]}),Object(ge.jsx)(Ge,{status:o,title:"Excluir?",message:"Deseja realmente exlcuir?",children:Object(ge.jsxs)("div",{className:"d-flex justify-content-end mt-3",children:[Object(ge.jsx)(ke.a,{variant:"primary",size:"sm",className:"px-4 mr-2",onClick:j,children:"Sim"}),Object(ge.jsx)(ke.a,{variant:"secondary",size:"sm",className:"px-4",onClick:m,children:"N\xe3o"})]})})]})},it=function(e,t){return{type:e,payload:t}},ot=function(e){return it(_,e)},lt=function(e){return it(w,e)},ut={createEvent:function(e,t){return Ke.post("/events",e,Me(t))},updateEvent:function(e,t){return Ke.put("/events",e,Me(t))},deleteEvent:function(e,t){return Ke.delete("/events/".concat(e),Me(t))},getEvent:function(e,t){return Ke.get("/events/".concat(e),Me(t))},getAllEvents:function(e){return Ke.get("/events/",Me(e))},getEventByUserId:function(e,t){return Ke.get("/events/user/".concat(e),Me(t))}};var dt=Object(i.b)((function(e){return{eventRegisterState:e.eventRegisterReducer,userRegisterState:e.userRegisterReducer,appState:e.appReducer,authState:e.authReducer}}))((function(e){var t=Object(n.useState)(!1),a=Object(Te.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),o=Object(Te.a)(r,2),l=o[0],u=o[1],d=Object(n.useState)({}),j=Object(Te.a)(d,2),b=j[0],h=j[1],O=Object(i.c)(),m=e.eventRegisterState,p=e.userRegisterState,f=e.appState,x=e.authState;function v(e){var t;O(ot()),O(it(D,t)),ut.deleteEvent(e.id,x.token).then((function(){O(function(e){return it(G,e)}()),S()})).catch((function(e){g(e),O(function(e){return it(V,e)}())}))}function S(){var e;O(it(P,e)),ut.getAllEvents(x.token).then((function(e){O(function(e){return it(F,e)}({data:e.data.content}))})).catch((function(e){if(404===e.response.status)return O(function(e){return it(q,e)}());g(e),O(function(e){return it(B,e)}())}))}function E(){O(qe()),Xe.getAllUsers(x.token).then((function(e){O(He({data:e.data.content}))})).catch((function(e){if(404===e.response.status)return O(We());g(e),O(Qe())}))}function g(e){e.response&&403===e.response.status&&O(tt())}return Object(n.useEffect)((function(){O(Ye("Eventos")),S()}),[]),Object(ge.jsxs)("div",{className:"event-register",children:[Object(ge.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(ge.jsxs)("h4",{className:"mr-2",children:[f.headerTitle," "]}),s&&Object(ge.jsx)("h6",{children:" /\xa0  Cadastrar"}),l&&Object(ge.jsx)("h6",{children:" /\xa0  Editar"}),!l&&!s&&Object(ge.jsx)("h6",{children:" /\xa0 Lista"})]}),!s&&!l&&Object(ge.jsx)("div",{className:"event-register-top-panel my-4",children:Object(ge.jsx)(ke.a,{variant:"success",onClick:function(){E(),c(!0)},size:"sm",className:"px-3",children:"Novo"})}),s&&Object(ge.jsx)(ct,{options:{handleSubmit:function(e){var t;O(ot()),O(it(U,t)),e.user={id:e.user},ut.createEvent(e,x.token).then((function(){O(function(e){return it(k,e)}({handleClose:function(){c(!1),O(lt()),S()}}))})).catch((function(e){g(e),O(function(e){return it(A,e)}({handleClose:function(){u(!1),O(lt()),S()}}))}))},handleCancel:function(){c(!1),S()},modal:m.modal,users:p.data}}),l&&Object(ge.jsx)(ct,{options:{handleSubmit:function(e){var t;O(ot()),O(it(L,t)),e.user={id:e.user},ut.updateEvent(e,x.token).then((function(){O(function(e){return it(I,e)}({handleClose:function(){u(!1),O(lt()),S()}}))})).catch((function(e){g(e),O(function(e){return it(z,e)}({handleClose:function(){u(!1),O(lt()),S()}}))}))},handleCancel:function(){u(!1),S()},modal:m.modal,editData:b,users:p.data}}),!s&&!l&&Object(ge.jsx)(rt,{data:m.data,actions:{handleEdit:function(e){E(),e.user=e.user?e.user.id:null,h(e),u(!0)},handleDelete:function(e){v(e)}}})]})})),jt=a(88),bt=a.n(jt),ht=a(128),Ot=a(268);var mt=function(e){var t=e.options||{},a=t.handleSubmit,s=t.authState,c=Object(n.useState)(),r=Object(Te.a)(c,2),i=r[0],o=r[1];Object(n.useEffect)((function(){var e;401===(e=s.httpStatus)?o("login inv\xe1lido ou usu\xe1rio bloqueado."):403===e?o("usu\xe1rio ou senha inv\xe1lidos, tente novamente."):e>=500&&o("erro ao tentar login, tente novamente.")}),[s.httpStatus]);var l=we.b().shape({email:we.c().email("e-mail inv\xe1lido").required("obrigat\xf3rio"),password:we.c().required("obrigat\xf3rio")});return Object(ge.jsxs)("div",{className:"login-form",children:[Object(ge.jsx)("div",{className:"d-flex justify-content-center",children:Object(ge.jsx)("h2",{children:"Login"})}),Object(ge.jsx)(_e.a,{validationSchema:l,onSubmit:a,initialValues:{email:"",password:""},children:function(e){var t=e.handleSubmit,a=e.handleChange,n=(e.handleBlur,e.values),c=e.touched,r=(e.isValid,e.errors);e.isSubmitting;return Object(ge.jsx)(Ue.a,{noValidate:!0,onSubmit:t,children:Object(ge.jsxs)(Ue.a.Row,{children:[Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"12",controlId:"groupEmail",children:[Object(ge.jsx)(Ue.a.Label,{children:"E-mail"}),Object(ge.jsx)(Ue.a.Control,{type:"email",placeholder:"",name:"email",value:n.email,onChange:a,isInvalid:c.email&&!!r.email,autoComplete:"off",disabled:1===s.status}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:r.email})]}),Object(ge.jsxs)(Ue.a.Group,{as:xe.a,md:"12",controlId:"groupPassword",children:[Object(ge.jsx)(Ue.a.Label,{children:"Senha"}),Object(ge.jsx)(Ue.a.Control,{type:"password",placeholder:"",name:"password",value:n.password,onChange:a,isInvalid:c.password&&!!r.password,autoComplete:"new-password",disabled:1===s.status}),Object(ge.jsx)(Ue.a.Control.Feedback,{type:"invalid",children:r.password})]}),1!==s.status&&2!==s.status&&Object(ge.jsx)(Ue.a.Group,{as:xe.a,className:"d-flex justify-content-center",controlId:"groupControls",children:Object(ge.jsx)(ke.a,{variant:"primary",type:"submit",size:"sm",className:"px-4 mr-3",disabled:1===s.status,children:"Login"})}),1===s.status&&Object(ge.jsxs)("div",{className:"d-flex justify-content-center align-items-center w-100",children:[Object(ge.jsx)(Le.a,{animation:"border",size:"sm",role:"status"}),Object(ge.jsx)("div",{className:"ml-2",children:"Aguarde..."})]})]})})}}),3===s.status&&Object(ge.jsx)(Ot.a,{variant:"danger",children:i})]})},pt={authentication:function(e){return Ke.post("/auth",e)}},ft=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var xt=Object(i.b)((function(e){return{authState:e.authReducer}}))((function(e){var t=Object(i.c)(),a=Object(Re.g)(),s=e.authState,c=e.isLogout;function r(){return(r=Object(ht.a)(bt.a.mark((function e(n){return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t($e()),e.next=3,ft(1e3);case 3:pt.authentication({username:n.email,password:n.password}).then((function(e){t(et({token:e.data.content.jwt,user:e.data.content.user})),a.push("/app")})).catch((function(e){e.response?t(at({httpStatus:e.response.status})):t(at({httpStatus:500}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c&&(t($e()),t(tt()),a.push("/app/login"))}),[c]),Object(ge.jsx)("div",{className:"login",children:Object(ge.jsx)(mt,{options:{handleSubmit:function(e){return r.apply(this,arguments)},authState:s}})})}));var vt=function(){return Object(ge.jsxs)(Re.d,{children:[Object(ge.jsx)(Re.b,{path:"/app/eventos",component:dt}),Object(ge.jsx)(Re.b,{path:"/app/usuarios",component:nt}),Object(ge.jsx)(Re.b,{path:"/app/logout",children:Object(ge.jsx)(xt,{isLogout:!0})})]})};a(259);var St=function(){return Object(ge.jsx)("div",{className:"main-app",children:Object(ge.jsx)(ye.a,{className:"card-panel",children:Object(ge.jsx)(ye.a.Body,{children:Object(ge.jsx)(vt,{})})})})};a(260);var Et=function(){return Object(ge.jsxs)("div",{className:"layout-default-app",children:[Object(ge.jsx)(Ce,{options:{title:"Gestor de Eventos"}}),Object(ge.jsx)(pe.a,{className:"",children:Object(ge.jsxs)(fe.a,{className:"py-3",children:[Object(ge.jsx)(xe.a,{className:"d-none d-md-block",xs:3,children:Object(ge.jsx)(Ne,{})}),Object(ge.jsx)(xe.a,{xs:12,md:8,children:Object(ge.jsx)(St,{})}),Object(ge.jsx)(xe.a,{className:"d-none d-md-block"})]})})]})};var gt=function(){return Object(ge.jsx)("div",{className:"layout-login d-flex justify-content-center align-items-center vh-100",children:Object(ge.jsx)(fe.a,{className:"d-flex justify-content-center",children:Object(ge.jsx)(xe.a,{md:6,className:"m-3",children:Object(ge.jsx)(xt,{})})})})},Ct=a(71);var yt=function(e){var t=e.isAuthenticated,a=e.typeAccess,n=e.component,s=Object(Ct.a)(e,["isAuthenticated","typeAccess","component"]);return Object(ge.jsx)(Re.b,Object(l.a)(Object(l.a)({},s),{},{render:function(e){var s=e.location;return!0===t&&"no-auth"===a?Object(ge.jsx)(Re.a,{to:{pathname:"/app",state:{from:s}}}):n()}}))};var Nt=function(e){var t=e.isAuthenticated,a=e.component,n=Object(Ct.a)(e,["isAuthenticated","component"]);return Object(ge.jsx)(Re.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return!0===t?a():Object(ge.jsx)(Re.a,{to:{pathname:"/app/login",state:{from:n}}})}}))};a(261);var Rt=Object(i.b)((function(e){return{authState:e.authReducer,store:e}}))((function(e){return Object(ge.jsxs)("div",{className:"App",children:[!1,Object(ge.jsxs)(Re.d,{children:[Object(ge.jsx)(yt,{path:"/app/login",component:gt,isAuthenticated:e.authState.isAuthenticated,typeAccess:"no-auth"}),Object(ge.jsx)(Nt,{path:"/app",component:Et,isAuthenticated:e.authState.isAuthenticated}),Object(ge.jsx)(Re.a,{exact:!0,path:"/",to:"/app"})]})]})})),Tt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,275)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};c.a.render(Object(ge.jsx)(i.a,{store:me,children:Object(ge.jsx)(r.a,{children:Object(ge.jsx)(Rt,{})})}),document.getElementById("root")),Tt()}},[[262,1,2]]]);
//# sourceMappingURL=main.f5f4fd48.chunk.js.map