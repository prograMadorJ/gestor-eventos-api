(this["webpackJsonpdesafio-frontend"]=this["webpackJsonpdesafio-frontend"]||[]).push([[0],{137:function(e,t,a){},140:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(25),c=a.n(s),r=a(24),i=a(14),o=a(72),l=a(4),u="SET_TITLE_HEADER_APP",d="INITIAL_USER_STATE",j="FINALLY_USER_REGISTER",b="POST_USER_REQUEST",h="POST_USER_SUCCESS",O="POST_USER_ERROR",m="POST_USER_CONFLICT",p="PUT_USER_REQUEST",f="PUT_USER_SUCCESS",x="PUT_USER_ERROR",v="DELETE_USER_REQUEST",S="DELETE_USER_SUCCESS",E="DELETE_USER_ERROR",g="GET_USER_REQUEST",C="GET_USER_SUCCESS",y="GET_USER_ERROR",N="GET_USER_NOT_FOUND",R="GET_USER_HAS_EVENTS",T="INITIAL_EVENT_STATE",_="FINALLY_EVENT_REGISTER",w="POST_EVENT_REQUEST",U="POST_EVENT_SUCCESS",k="POST_EVENT_ERROR",A="PUT_EVENT_REQUEST",L="PUT_EVENT_SUCCESS",I="PUT_EVENT_ERROR",D="DELETE_EVENT_REQUEST",z="DELETE_EVENT_SUCCESS",G="DELETE_EVENT_ERROR",V="GET_EVENT_REQUEST",P="GET_EVENT_SUCCESS",F="GET_EVENT_ERROR",B="GET_EVENT_NOT_FOUND",q="AUTH_REQUEST",H="AUTH_LOGIN_SUCCESS",Q="AUTH_LOGOUT_SUCCESS",W="AUTH_ERROR",J={headerTitle:"Home"};function K(e){return{headerTitle:e.headerTitle}}var Y={data:[],status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}};function M(e){return{status:2,modal:{status:2,title:"Salvo",message:"Usu\xe1rio foi salvo com sucesso!",showSpinner:!1,handleClose:e&&e.handleClose}}}function X(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e&&e.handleClose}}}function Z(e){return{status:3,modal:{status:3,title:"Aten\xe7\xe3o",message:"N\xe3o foi poss\xedvel conluir a opera\xe7\xe3o pois o usu\xe1rio j\xe1 exsite cadastrado.",showSpinner:!1,handleClose:e&&e.handleClose}}}function $(e){return{status:2,modal:{status:2,title:"Atualizado",message:"Usu\xe1rio foi atualizado com sucesso!",showSpinner:!1,handleClose:e&&e.handleClose}}}function ee(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e&&e.handleClose}}}function te(e){return{status:0,data:e.data}}function ae(e){return{status:4,modal:{status:4,title:"Aten\xe7\xe3o",message:"Este usu\xe1rio possui eventos associados, e n\xe3o poder\xe1 ser exclu\xeddo. Remova todos os eventos associados para poder exlcu\xedr o usu\xe1rio.",showSpinner:!1,handleClose:e&&e.handleClose}}}var ne={data:[],status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}};function se(e){return{status:2,modal:{status:2,title:"Salvo",message:"Evento criado com sucesso!",showSpinner:!1,handleClose:e.handleClose}}}function ce(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e.handleClose}}}function re(e){return{status:2,modal:{status:2,title:"Atualizado",message:"Evento foi atualizado com sucesso!",showSpinner:!1,handleClose:e.handleClose}}}function ie(e){return{status:3,modal:{status:3,title:"Erro",message:"N\xe3o foi poss\xedvel completar a solicita\xe7\xe3o, tente novamente.",showSpinner:!1,handleClose:e.handleClose}}}function oe(e){return{status:0,data:e.data}}var le={status:0,token:"",isAuthenticated:!1,user:{id:null,name:"",email:"",admin:!1}};function ue(e){return{status:2,isAuthenticated:!0,token:e.token,user:e.user}}function de(){return le}function je(e){return{status:3,token:"",isAuthenticated:!1,user:null,httpStatus:e&&e.httpStatus}}var be=Object(o.a)({appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),K(t.payload));default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case H:return Object(l.a)(Object(l.a)({},e),ue(t.payload));case Q:return Object(l.a)(Object(l.a)({},e),de(t.payload));case W:return Object(l.a)(Object(l.a)({},e),je(t.payload));default:return e}},userRegisterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)({},Y);case j:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}}));case b:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Salvando",message:"Aguarde...",showSpinner:!0}}));case h:return Object(l.a)(Object(l.a)({},e),M(t.payload));case O:return Object(l.a)(Object(l.a)({},e),X(t.payload));case m:return Object(l.a)(Object(l.a)({},e),Z(t.payload));case x:return Object(l.a)(Object(l.a)({},e),ee(t.payload));case p:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Atualizando",message:"Aguarde...",showSpinner:!0}}));case f:return Object(l.a)(Object(l.a)({},e),$(t.payload));case E:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case v:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case S:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0}));case g:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case C:return Object(l.a)(Object(l.a)({},e),te(t.payload));case y:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case N:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:4}));case R:return Object(l.a)(Object(l.a)({},e),ae(t.payload));default:return e}},eventRegisterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(l.a)({},ne);case _:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0,modal:{status:0,type:"",title:"",message:"",showSpinner:!1,handleClose:void 0}}));case w:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Salvando",message:"Aguarde...",showSpinner:!0}}));case U:return Object(l.a)(Object(l.a)({},e),se(t.payload));case k:return Object(l.a)(Object(l.a)({},e),ce(t.payload));case I:return Object(l.a)(Object(l.a)({},e),ie(t.payload));case A:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1,modal:{status:1,title:"Atualizando",message:"Aguarde...",showSpinner:!0}}));case L:return Object(l.a)(Object(l.a)({},e),re(t.payload));case G:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case D:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case z:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:0}));case V:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:1}));case P:return Object(l.a)(Object(l.a)({},e),oe(t.payload));case F:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:3}));case B:return Object(l.a)(Object(l.a)({},e),(t.payload,{status:4}));default:return e}}}),he=Object(o.b)(be),Oe=(a(136),a(137),a(264)),me=a(269),pe=a(127),fe=a(273),xe=a(272),ve=a(71),Se=a(1);var Ee=function(e){var t=(e.options||{}).title;return Object(Se.jsx)("div",{className:"header-app",children:Object(Se.jsx)(fe.a,{bg:"light",expand:"lg",children:Object(Se.jsxs)(Oe.a,{children:[Object(Se.jsx)(fe.a.Brand,{href:"#home",children:Object(Se.jsx)("div",{className:"d-flex align-items-center",children:t})}),Object(Se.jsx)(fe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(Se.jsx)(fe.a.Collapse,{id:"basic-navbar-nav",children:Object(Se.jsxs)(xe.a,{className:"mr-auto d-sm-block d-lg-none",children:[Object(Se.jsx)(xe.a.Link,{href:"/eventos",children:"Eventos"}),Object(Se.jsx)(xe.a.Link,{href:"/usuarios",children:"Usu\xe1rios"}),Object(Se.jsx)(xe.a.Link,{href:"/logout",children:"Sair"})]})}),Object(Se.jsx)(xe.a.Link,{href:"/logout",className:"d-none d-lg-block",children:Object(Se.jsxs)("div",{className:"d-flex align-items-center",children:[Object(Se.jsx)("span",{className:"mr-2",children:"Sair"}),Object(Se.jsx)(ve.a,{})]})})]})})})},ge=a(274);a(140);var Ce=function(){return Object(Se.jsx)("div",{className:"sidebar-app",children:Object(Se.jsx)(ge.a,{className:"card-panel",children:Object(Se.jsx)(ge.a.Body,{children:Object(Se.jsxs)(xe.a,{defaultActiveKey:"/",className:"flex-column",children:[Object(Se.jsx)(r.b,{to:"/eventos",className:"nav-link",children:Object(Se.jsxs)("div",{className:"d-flex align-items-center",children:[Object(Se.jsx)(ve.d,{className:"mr-2"}),Object(Se.jsx)("span",{children:"Eventos"})]})}),Object(Se.jsx)(r.b,{to:"/usuarios",className:"nav-link",children:Object(Se.jsxs)("div",{className:"d-flex align-items-center",children:[Object(Se.jsx)(ve.b,{className:"mr-2"}),Object(Se.jsx)("span",{children:"Usu\xe1rios"})]})})]})})})})},ye=a(10),Ne=a(46),Re=a.n(Ne),Te=a(66),_e=a(8),we=a(43),Ue=a(16),ke=a(271),Ae=a(266),Le=a(270),Ie=a(265);var De=function(e){return Object(Se.jsx)(Se.Fragment,{children:Object(Se.jsxs)(Le.a,{show:e.status>0,backdrop:"static",keyboard:!1,children:[e.title&&Object(Se.jsx)(Le.a.Header,{children:Object(Se.jsx)(Le.a.Title,{children:e.title})}),Object(Se.jsxs)(Le.a.Body,{children:[e.showSpinner&&Object(Se.jsx)(Ie.a,{animation:"border",size:"sm",className:"mr-2"}),e.message,Object(Se.jsx)("div",{className:"d-flex justify-content-end mt-3",children:e.handleClose&&Object(Se.jsx)(Ae.a,{variant:"primary",size:"sm",className:"px-4",onClick:e.handleClose,children:"OK"})})]})]})})};var ze=function(e){var t=e.options||{},a=t.handleSubmit,n=t.handleCancel,s=t.modal,c=t.editData,r=Ue.b().shape({name:Ue.c().required("obrigat\xf3rio"),email:Ue.c().email("e-mail inv\xe1lido").required("obrigat\xf3rio"),password:Ue.c().min(8,"senha deve ter no m\xednimo 8 caract\xe9res").required("obrigat\xf3rio")});return Object(Se.jsx)(we.a,{validationSchema:r,onSubmit:a,initialValues:Object(l.a)(Object(l.a)({},{name:"",email:"",password:""}),c||{}),children:function(e){var t=e.handleSubmit,a=e.handleChange,c=(e.handleBlur,e.values),r=e.touched,i=(e.isValid,e.errors);e.isSubmitting;return Object(Se.jsxs)(ke.a,{noValidate:!0,onSubmit:t,children:[Object(Se.jsxs)(ke.a.Row,{children:[Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"12",controlId:"groupName",children:[Object(Se.jsx)(ke.a.Label,{children:"Nome"}),Object(Se.jsx)(ke.a.Control,{type:"text",placeholder:"",name:"name",value:c.name,onChange:a,isInvalid:r.name&&!!i.name,disabled:1===s.status,autoComplete:"off"}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:i.name})]}),Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"12",controlId:"groupEmail",children:[Object(Se.jsx)(ke.a.Label,{children:"E-mail"}),Object(Se.jsx)(ke.a.Control,{type:"email",placeholder:"",name:"email",value:c.email,onChange:a,isInvalid:r.email&&!!i.email,autoComplete:"off",disabled:1===s.status}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:i.email})]}),Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"12",controlId:"groupPassword",children:[Object(Se.jsx)(ke.a.Label,{children:"Senha"}),Object(Se.jsx)(ke.a.Control,{type:"password",placeholder:"",name:"password",value:c.password,onChange:a,isInvalid:r.password&&!!i.password,autoComplete:"new-password",disabled:1===s.status}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:i.password})]}),1!==s.status&&2!==s.status&&Object(Se.jsxs)(ke.a.Group,{as:pe.a,controlId:"groupControls",children:[Object(Se.jsx)(Ae.a,{variant:"primary",type:"submit",size:"sm",className:"px-4 mr-3",disabled:1===s.status,children:"Salvar"}),Object(Se.jsx)(Ae.a,{variant:"secondary",type:"button",size:"sm",onClick:n,className:"px-3",children:"Cancelar"})]})]}),Object(Se.jsx)(De,{status:s.status,title:s.title,message:s.message,showSpinner:s.showSpinner,handleClose:s.handleClose})]})}})},Ge=a(267);var Ve=function(e){return Object(Se.jsx)(Se.Fragment,{children:Object(Se.jsxs)(Le.a,{show:e.status>0,backdrop:"static",keyboard:!1,children:[e.title&&Object(Se.jsx)(Le.a.Header,{children:Object(Se.jsx)(Le.a.Title,{children:e.title})}),Object(Se.jsxs)(Le.a.Body,{children:[e.showSpinner&&Object(Se.jsx)(Ie.a,{animation:"border",size:"sm",className:"mr-2"}),e.message,Object(Se.jsx)("div",{className:"d-flex justify-content-end mt-3",children:e.children})]})]})})};var Pe=function(e){var t=e.data||[],a=e.authState,s=e.actions||{},c=s.handleEdit,r=s.handleDelete,i=Object(n.useState)(0),o=Object(_e.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(),j=Object(_e.a)(d,2),b=j[0],h=j[1],O=Object(n.useState)(),m=Object(_e.a)(O,2),p=m[0],f=m[1];return Object(Se.jsxs)("div",{className:"data-table-list",children:[Object(Se.jsxs)(Ge.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(Se.jsx)("thead",{children:Object(Se.jsxs)("tr",{children:[Object(Se.jsx)("th",{children:"#"}),Object(Se.jsx)("th",{children:"Nome"}),Object(Se.jsx)("th",{children:"E-mail"}),Object(Se.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(Se.jsx)("tbody",{children:t.map((function(e,t){return Object(Se.jsxs)("tr",{children:[Object(Se.jsx)("td",{children:t+1}),Object(Se.jsx)("td",{children:e.name}),Object(Se.jsx)("td",{children:e.email}),Object(Se.jsx)("td",{children:(a.user.admin||a.user.email===e.email)&&Object(Se.jsxs)("div",{children:[Object(Se.jsx)(Ae.a,{onClick:function(){return c(e)},size:"sm",className:"mr-2",variant:"transparent",title:"editar",children:Object(Se.jsx)(ve.c,{color:"#007bff",strokeWidth:.5})}),e.role!==a.user.role&&Object(Se.jsx)(Ae.a,{onClick:function(){return t=function(){return r(e)},u(1),h((function(){return function(){u(0),t&&t()}})),void f((function(){return function(){u(0),a&&a()}}));var t,a},size:"sm",variant:"transparent",title:"remover",children:Object(Se.jsx)(ve.e,{color:"#dc3545",strokeWidth:.5})})]})})]},t)}))})]}),Object(Se.jsx)(Ve,{status:l,title:"Excluir?",message:"Deseja realmente exlcuir?",children:Object(Se.jsxs)("div",{className:"d-flex justify-content-end mt-3",children:[Object(Se.jsx)(Ae.a,{variant:"primary",size:"sm",className:"px-4 mr-2",onClick:b,children:"Sim"}),Object(Se.jsx)(Ae.a,{variant:"secondary",size:"sm",className:"px-4",onClick:p,children:"N\xe3o"})]})})]})},Fe=function(e,t){return{type:e,payload:t}},Be=function(e){return Fe(d,e)},qe=function(e){return Fe(j,e)},He=function(e){return Fe(E,e)},Qe=function(e){return Fe(g,e)},We=function(e){return Fe(C,e)},Je=function(e){return Fe(y,e)},Ke=function(e){return Fe(N,e)},Ye=function(e){return function(e,t){return{type:e,payload:t}}(u,{headerTitle:e})},Me=a(128),Xe=a.n(Me).a.create({baseURL:"http://localhost:8080/api"}),Ze=function(e){return{headers:{Authorization:"Bearer ".concat(e)}}},$e={createUser:function(e,t){return Xe.post("/users",e,Ze(t))},updateUser:function(e,t){return Xe.put("/users",e,Ze(t))},deleteUser:function(e,t){return Xe.delete("/users/".concat(e),Ze(t))},getUser:function(e,t){return Xe.get("/users/".concat(e),Ze(t))},getAllUsers:function(e){return Xe.get("/users/",Ze(e))}},et={createEvent:function(e,t){return Xe.post("/events",e,Ze(t))},updateEvent:function(e,t){return Xe.put("/events",e,Ze(t))},deleteEvent:function(e,t){return Xe.delete("/events/".concat(e),Ze(t))},getEvent:function(e,t){return Xe.get("/events/".concat(e),Ze(t))},getAllEvents:function(e){return Xe.get("/events/",Ze(e))},getEventByUserId:function(e,t){return Xe.get("/events/user/".concat(e),Ze(t))}},tt=function(e,t){return{type:e,payload:t}},at=function(e){return tt(q,e)},nt=function(e){return tt(H,e)},st=function(e){return tt(Q,e)},ct=function(e){return tt(W,e)};var rt=Object(i.b)((function(e){return{userRegisterState:e.userRegisterReducer,appState:e.appReducer,authState:e.authReducer}}))((function(e){var t=Object(n.useState)(!1),a=Object(_e.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),o=Object(_e.a)(r,2),l=o[0],u=o[1],d=Object(n.useState)({}),j=Object(_e.a)(d,2),E=j[0],g=j[1],C=Object(i.c)(),y=e.userRegisterState,N=e.appState,T=e.authState;function _(e){var t;C(Be()),C(Fe(v,t)),$e.deleteUser(e.id,T.token).then((function(){C(function(e){return Fe(S,e)}()),w()})).catch((function(e){C(He({handleClose:function(){}})),k(e)}))}function w(){C(Qe()),$e.getAllUsers(T.token).then((function(e){C(We({data:e.data.content}))})).catch((function(e){if(e&&404===e.response.status)return C(Ke());k(e),C(Je({handleClose:function(){}}))}))}function U(){return(U=Object(Te.a)(Re.a.mark((function e(t){var a,n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?t.id:null,e.next=3,et.getEventByUserId(a,T.token);case 3:return n=e.sent,e.abrupt("return",n&&n.data&&null===n.data.content);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){e&&e.response&&403===e.response.status&&C(st())}return Object(n.useEffect)((function(){C(Ye("Usu\xe1rios")),w()}),[]),Object(Se.jsxs)("div",{className:"user-register",children:[Object(Se.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(Se.jsx)("h4",{className:"mr-2",children:N.headerTitle}),s&&Object(Se.jsx)("h6",{children:" /\xa0  Cadastrar"}),l&&Object(Se.jsx)("h6",{children:" /\xa0  Editar"}),!l&&!s&&Object(Se.jsx)("h6",{children:" /\xa0 Lista"})]}),!s&&!l&&T.user.admin&&Object(Se.jsx)("div",{className:"user-register-top-panel my-4",children:Object(Se.jsx)(Ae.a,{variant:"success",onClick:function(){c(!0)},size:"sm",className:"px-3",children:"Novo"})}),s&&Object(Se.jsx)(ze,{options:{handleSubmit:function(e){var t;C(Be()),C(Fe(b,t)),$e.createUser(e,T.token).then((function(){C(function(e){return Fe(h,e)}({handleClose:function(){c(!1),C(qe()),w()}}))})).catch((function(e){e&&e.response&&409===e.response.status?C(function(e){return Fe(m,e)}({handleClose:function(){C(qe())}})):C(function(e){return Fe(O,e)}({handleClose:function(){C(qe())}})),k(e)}))},handleCancel:function(){c(!1),w()},modal:y.modal}}),l&&Object(Se.jsx)(ze,{options:{handleSubmit:function(e){var t;C(Be()),C(Fe(p,t)),$e.updateUser(e,T.token).then((function(){C(function(e){return Fe(f,e)}({handleClose:function(){u(!1),C(qe()),w()}}))})).catch((function(e){C(function(e){return Fe(x,e)}({handleClose:function(){C(qe())}})),k(e)}))},handleCancel:function(){u(!1),w()},modal:y.modal,editData:E}}),!s&&!l&&Object(Se.jsx)(Pe,{data:y.data,actions:{handleEdit:function(e){g(e),u(!0)},handleDelete:function(e){(function(e){return U.apply(this,arguments)})(e).then((function(){C(Fe(R,{handleClose:function(){C(qe())}}))})).catch((function(t){t.response&&null===t.response.data.content?_(e):C(He({handleClose:function(){C(qe())}}))}))}},authState:T}),4===y.status&&Object(Se.jsx)(De,{status:y.modal.status,title:y.modal.title,message:y.modal.message,showSpinner:y.modal.showSpinner,handleClose:y.modal.handleClose})]})})),it=a(20);var ot=function(e){var t=e.options||{},a=t.handleSubmit,n=t.handleCancel,s=t.modal,c=t.editData,r=t.users,i=[{id:null,name:""}].concat(Object(it.a)(r||[])),o=Ue.b().shape({name:Ue.c().required("obrigat\xf3rio"),date:Ue.a().required("obrigat\xf3rio"),user:Ue.c().nullable().required("obrigat\xf3rio")});return Object(Se.jsx)(we.a,{validationSchema:o,onSubmit:a,initialValues:Object(l.a)(Object(l.a)({},{name:"",date:"",user:null}),c||{}),children:function(e){var t,a=e.handleSubmit,c=e.handleChange,r=(e.handleBlur,e.values),o=e.touched,l=(e.isValid,e.errors);e.isSubmitting;return Object(Se.jsxs)(ke.a,{noValidate:!0,onSubmit:a,children:[Object(Se.jsxs)(ke.a.Row,{className:"d-flex justify-content-between",children:[Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"12",controlId:"groupName",children:[Object(Se.jsx)(ke.a.Label,{children:"Nome do Evento"}),Object(Se.jsx)(ke.a.Control,{type:"text",placeholder:"",name:"name",value:r.name,onChange:c,isInvalid:o.name&&!!l.name,disabled:1===s.status,autoComplete:"off"}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:l.name})]}),Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"5",controlId:"groupDate",children:[Object(Se.jsx)(ke.a.Label,{children:"Data"}),Object(Se.jsx)(ke.a.Control,{type:"date",placeholder:"",name:"date",value:(t=r.date,t?new Date(t).toLocaleDateString().split("/").reverse().join("-"):t),onChange:c,isInvalid:o.date&&!!l.date,autoComplete:"off",disabled:1===s.status}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:l.date})]}),Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"5",controlId:"groupUser",children:[Object(Se.jsx)(ke.a.Label,{children:"Respons\xe1vel"}),Object(Se.jsx)(ke.a.Control,{as:"select",custom:!0,name:"user",value:r.user,onChange:c,isInvalid:o.user&&!!l.user,disabled:1===s.status,children:i.map((function(e,t){return Object(Se.jsx)("option",{value:e.id,label:e.name},t)}))}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:l.user})]}),1!==s.status&&2!==s.status&&Object(Se.jsxs)(ke.a.Group,{as:pe.a,xs:12,controlId:"groupControls",children:[Object(Se.jsx)(Ae.a,{variant:"primary",type:"submit",size:"sm",className:"px-4 mr-3",disabled:1===s.status,children:"Salvar"}),Object(Se.jsx)(Ae.a,{variant:"secondary",type:"button",size:"sm",onClick:n,className:"px-3",children:"Cancelar"})]})]}),Object(Se.jsx)(De,{status:s.status,title:s.title,message:s.message,showSpinner:s.showSpinner,handleClose:s.handleClose})]})}})};var lt=function(e){var t=e.data||[],a=e.actions||{},s=a.handleEdit,c=a.handleDelete,r=Object(n.useState)(0),i=Object(_e.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)(),d=Object(_e.a)(u,2),j=d[0],b=d[1],h=Object(n.useState)(),O=Object(_e.a)(h,2),m=O[0],p=O[1];return Object(Se.jsxs)("div",{className:"data-table-list",children:[Object(Se.jsxs)(Ge.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(Se.jsx)("thead",{children:Object(Se.jsxs)("tr",{children:[Object(Se.jsx)("th",{children:"#"}),Object(Se.jsx)("th",{children:"Data"}),Object(Se.jsx)("th",{children:"Nome"}),Object(Se.jsx)("th",{children:"Respons\xe1vel"}),Object(Se.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(Se.jsx)("tbody",{children:t.map((function(e,t){return Object(Se.jsxs)("tr",{children:[Object(Se.jsx)("td",{children:t+1}),Object(Se.jsx)("td",{children:(a=e.date,a?new Date(a).toLocaleDateString():a)}),Object(Se.jsx)("td",{children:e.name}),Object(Se.jsx)("td",{children:e.user?e.user.name:null}),Object(Se.jsxs)("td",{children:[Object(Se.jsx)(Ae.a,{onClick:function(){return s(e)},size:"sm",className:"mr-2",variant:"transparent",title:"editar",children:Object(Se.jsx)(ve.c,{color:"#007bff",strokeWidth:.5})}),Object(Se.jsx)(Ae.a,{onClick:function(){return t=function(){return c(e)},l(1),b((function(){return function(){l(0),t&&t()}})),void p((function(){return function(){l(0),a&&a()}}));var t,a},size:"sm",variant:"transparent",title:"remover",children:Object(Se.jsx)(ve.e,{color:"#dc3545",strokeWidth:.5})})]})]},t);var a}))})]}),Object(Se.jsx)(Ve,{status:o,title:"Excluir?",message:"Deseja realmente exlcuir?",children:Object(Se.jsxs)("div",{className:"d-flex justify-content-end mt-3",children:[Object(Se.jsx)(Ae.a,{variant:"primary",size:"sm",className:"px-4 mr-2",onClick:j,children:"Sim"}),Object(Se.jsx)(Ae.a,{variant:"secondary",size:"sm",className:"px-4",onClick:m,children:"N\xe3o"})]})})]})},ut=function(e,t){return{type:e,payload:t}},dt=function(e){return ut(T,e)},jt=function(e){return ut(_,e)};var bt=Object(i.b)((function(e){return{eventRegisterState:e.eventRegisterReducer,userRegisterState:e.userRegisterReducer,appState:e.appReducer,authState:e.authReducer}}))((function(e){var t=Object(n.useState)(!1),a=Object(_e.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),o=Object(_e.a)(r,2),l=o[0],u=o[1],d=Object(n.useState)({}),j=Object(_e.a)(d,2),b=j[0],h=j[1],O=Object(i.c)(),m=e.eventRegisterState,p=e.userRegisterState,f=e.appState,x=e.authState;function v(e){var t;O(dt()),O(ut(D,t)),et.deleteEvent(e.id,x.token).then((function(){O(function(e){return ut(z,e)}()),S()})).catch((function(e){g(e),O(function(e){return ut(G,e)}())}))}function S(){var e;O(ut(V,e)),et.getAllEvents(x.token).then((function(e){O(function(e){return ut(P,e)}({data:e.data.content}))})).catch((function(e){if(404===e.response.status)return O(function(e){return ut(B,e)}());g(e),O(function(e){return ut(F,e)}())}))}function E(){O(Qe()),$e.getAllUsers(x.token).then((function(e){O(We({data:e.data.content}))})).catch((function(e){if(404===e.response.status)return O(Ke());g(e),O(Je())}))}function g(e){e.response&&403===e.response.status&&O(st())}return Object(n.useEffect)((function(){O(Ye("Eventos")),S()}),[]),Object(Se.jsxs)("div",{className:"event-register",children:[Object(Se.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(Se.jsxs)("h4",{className:"mr-2",children:[f.headerTitle," "]}),s&&Object(Se.jsx)("h6",{children:" /\xa0  Cadastrar"}),l&&Object(Se.jsx)("h6",{children:" /\xa0  Editar"}),!l&&!s&&Object(Se.jsx)("h6",{children:" /\xa0 Lista"})]}),!s&&!l&&Object(Se.jsx)("div",{className:"event-register-top-panel my-4",children:Object(Se.jsx)(Ae.a,{variant:"success",onClick:function(){E(),c(!0)},size:"sm",className:"px-3",children:"Novo"})}),s&&Object(Se.jsx)(ot,{options:{handleSubmit:function(e){var t;O(dt()),O(ut(w,t)),e.user={id:e.user},et.createEvent(e,x.token).then((function(){O(function(e){return ut(U,e)}({handleClose:function(){c(!1),O(jt()),S()}}))})).catch((function(e){g(e),O(function(e){return ut(k,e)}({handleClose:function(){u(!1),O(jt()),S()}}))}))},handleCancel:function(){c(!1),S()},modal:m.modal,users:p.data}}),l&&Object(Se.jsx)(ot,{options:{handleSubmit:function(e){var t;O(dt()),O(ut(A,t)),e.user={id:e.user},et.updateEvent(e,x.token).then((function(){O(function(e){return ut(L,e)}({handleClose:function(){u(!1),O(jt()),S()}}))})).catch((function(e){g(e),O(function(e){return ut(I,e)}({handleClose:function(){u(!1),O(jt()),S()}}))}))},handleCancel:function(){u(!1),S()},modal:m.modal,editData:b,users:p.data}}),!s&&!l&&Object(Se.jsx)(lt,{data:m.data,actions:{handleEdit:function(e){E(),e.user=e.user?e.user.id:null,h(e),u(!0)},handleDelete:function(e){v(e)}}})]})})),ht=a(268);var Ot=function(e){var t=e.options||{},a=t.handleSubmit,s=t.authState,c=Object(n.useState)(),r=Object(_e.a)(c,2),i=r[0],o=r[1];Object(n.useEffect)((function(){var e;401===(e=s.httpStatus)?o("login inv\xe1lido ou usu\xe1rio bloqueado."):403===e?o("usu\xe1rio ou senha inv\xe1lidos, tente novamente."):e>=500&&o("erro ao tentar login, tente novamente.")}),[s.httpStatus]);var l=Ue.b().shape({email:Ue.c().email("e-mail inv\xe1lido").required("obrigat\xf3rio"),password:Ue.c().required("obrigat\xf3rio")});return Object(Se.jsxs)("div",{className:"login-form",children:[Object(Se.jsx)("div",{className:"d-flex justify-content-center",children:Object(Se.jsx)("h2",{children:"Login"})}),Object(Se.jsx)(we.a,{validationSchema:l,onSubmit:a,initialValues:{email:"",password:""},children:function(e){var t=e.handleSubmit,a=e.handleChange,n=(e.handleBlur,e.values),c=e.touched,r=(e.isValid,e.errors);e.isSubmitting;return Object(Se.jsx)(ke.a,{noValidate:!0,onSubmit:t,children:Object(Se.jsxs)(ke.a.Row,{children:[Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"12",controlId:"groupEmail",children:[Object(Se.jsx)(ke.a.Label,{children:"E-mail"}),Object(Se.jsx)(ke.a.Control,{type:"email",placeholder:"",name:"email",value:n.email,onChange:a,isInvalid:c.email&&!!r.email,autoComplete:"off",disabled:1===s.status}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:r.email})]}),Object(Se.jsxs)(ke.a.Group,{as:pe.a,md:"12",controlId:"groupPassword",children:[Object(Se.jsx)(ke.a.Label,{children:"Senha"}),Object(Se.jsx)(ke.a.Control,{type:"password",placeholder:"",name:"password",value:n.password,onChange:a,isInvalid:c.password&&!!r.password,autoComplete:"new-password",disabled:1===s.status}),Object(Se.jsx)(ke.a.Control.Feedback,{type:"invalid",children:r.password})]}),1!==s.status&&2!==s.status&&Object(Se.jsx)(ke.a.Group,{as:pe.a,className:"d-flex justify-content-center",controlId:"groupControls",children:Object(Se.jsx)(Ae.a,{variant:"primary",type:"submit",size:"sm",className:"px-4 mr-3",disabled:1===s.status,children:"Login"})}),1===s.status&&Object(Se.jsxs)("div",{className:"d-flex justify-content-center align-items-center w-100",children:[Object(Se.jsx)(Ie.a,{animation:"border",size:"sm",role:"status"}),Object(Se.jsx)("div",{className:"ml-2",children:"Aguarde..."})]})]})})}}),3===s.status&&Object(Se.jsx)(ht.a,{variant:"danger",children:i})]})},mt={authentication:function(e){return Xe.post("/auth",e)}},pt=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var ft=Object(i.b)((function(e){return{authState:e.authReducer}}))((function(e){var t=Object(i.c)(),a=Object(ye.g)(),s=e.authState,c=e.isLogout;function r(){return(r=Object(Te.a)(Re.a.mark((function e(n){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(at()),e.next=3,pt(1e3);case 3:mt.authentication({username:n.email,password:n.password}).then((function(e){t(nt({token:e.data.content.jwt,user:e.data.content.user})),a.push("/")})).catch((function(e){e.response?t(ct({httpStatus:e.response.status})):t(ct({httpStatus:500}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c&&(t(at()),t(st()),a.push("/login"))}),[c]),Object(Se.jsx)("div",{className:"login",children:Object(Se.jsx)(Ot,{options:{handleSubmit:function(e){return r.apply(this,arguments)},authState:s}})})}));var xt=function(){return Object(Se.jsxs)(ye.d,{children:[Object(Se.jsx)(ye.b,{path:"/eventos",component:bt}),Object(Se.jsx)(ye.b,{path:"/usuarios",component:rt}),Object(Se.jsx)(ye.b,{path:"/logout",children:Object(Se.jsx)(ft,{isLogout:!0})})]})};a(259);var vt=function(){return Object(Se.jsx)("div",{className:"main-app",children:Object(Se.jsx)(ge.a,{className:"card-panel",children:Object(Se.jsx)(ge.a.Body,{children:Object(Se.jsx)(xt,{})})})})};a(260);var St=function(){return Object(Se.jsxs)("div",{className:"layout-default-app",children:[Object(Se.jsx)(Ee,{options:{title:"Gestor de Eventos"}}),Object(Se.jsx)(Oe.a,{className:"",children:Object(Se.jsxs)(me.a,{className:"py-3",children:[Object(Se.jsx)(pe.a,{className:"d-none d-md-block",xs:3,children:Object(Se.jsx)(Ce,{})}),Object(Se.jsx)(pe.a,{xs:12,md:8,children:Object(Se.jsx)(vt,{})}),Object(Se.jsx)(pe.a,{className:"d-none d-md-block"})]})})]})};var Et=function(){return Object(Se.jsx)("div",{className:"layout-login d-flex justify-content-center align-items-center vh-100",children:Object(Se.jsx)(me.a,{className:"d-flex justify-content-center",children:Object(Se.jsx)(pe.a,{md:6,className:"m-3",children:Object(Se.jsx)(ft,{})})})})},gt=a(73);var Ct=function(e){var t=e.isAuthenticated,a=e.typeAccess,n=e.component,s=Object(gt.a)(e,["isAuthenticated","typeAccess","component"]);return Object(Se.jsx)(ye.b,Object(l.a)(Object(l.a)({},s),{},{render:function(e){var s=e.location;return!0===t&&"no-auth"===a?Object(Se.jsx)(ye.a,{to:{pathname:"/",state:{from:s}}}):n()}}))};var yt=function(e){var t=e.isAuthenticated,a=e.component,n=Object(gt.a)(e,["isAuthenticated","component"]);return Object(Se.jsx)(ye.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return!0===t?a():Object(Se.jsx)(ye.a,{to:{pathname:"/login",state:{from:n}}})}}))};a(261);var Nt=Object(i.b)((function(e){return{authState:e.authReducer,store:e}}))((function(e){return Object(Se.jsxs)("div",{className:"App",children:[!1,Object(Se.jsxs)(ye.d,{children:[Object(Se.jsx)(Ct,{path:"/login",component:Et,isAuthenticated:e.authState.isAuthenticated,typeAccess:"no-auth"}),Object(Se.jsx)(yt,{path:"/",component:St,isAuthenticated:e.authState.isAuthenticated})]})]})})),Rt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,275)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};c.a.render(Object(Se.jsx)(i.a,{store:he,children:Object(Se.jsx)(r.a,{children:Object(Se.jsx)(Nt,{})})}),document.getElementById("root")),Rt()}},[[262,1,2]]]);
//# sourceMappingURL=main.4015b7e3.chunk.js.map